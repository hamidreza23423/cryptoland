<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ÿ™ÿ≥ÿ™ ÿßŸÜÿØ€å⁄©ÿßÿ™Ÿàÿ± ‚Äî ÿ®ÿß⁄©ÿ≥ ÿ¥€åÿ¥Ÿá‚Äåÿß€å</title>
<script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>

<style>
@import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn/Vazirmatn-font-face.css');

body {
  margin: 0;
  height: 100vh;
  font-family: 'Vazirmatn', sans-serif;
  background: linear-gradient(135deg, #000000, #000000);
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

.chart-box {
  width: 90%;
  max-width: 1200px;
  height: 85%;
  background: rgba(255,255,255,0.12);
  border-radius: 20px;
  backdrop-filter: blur(14px);
  box-shadow: 0 8px 40px rgba(0,0,0,0.35);
  padding: 20px;
  display: flex;
  flex-direction: column;
  animation: fadeIn 1s ease;
}

@keyframes fadeIn {
  from {opacity: 0; transform: scale(0.98);}
  to {opacity: 1; transform: scale(1);}
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 14px;
  gap: 10px;
  flex-wrap: wrap;
}

.dropdown {
  position: relative;
  flex: 1;
  min-width: 150px;
  text-align: center;
}

.dropdown-toggle {
  width: 80%;
  padding: 10px 16px;
  border-radius: 12px;
  background: rgba(255,255,255,0.18);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.3);
  font-weight: 600;
  cursor: pointer;
  text-align: center;
  transition: all 0.25s ease;
  font-size: 15px;
  user-select: none;
  position: relative;
}

.dropdown-toggle::after {
  content: "‚ñæ";
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.8;
  font-size: 16px;
}

.dropdown-toggle:hover {
  background: rgba(255,255,255,0.3);
  transform: translateY(-2px);
}

.dropdown-menu {
  position: absolute;
  top: 110%;
  left: 0;
  width: 100%;
  max-height: 200px;
  overflow-y: auto;
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 12px;
  backdrop-filter: blur(12px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
  display: none;
  flex-direction: column;
  z-index: 100;
  animation: fadeInMenu 0.25s ease;
  scrollbar-width: thin;
  scrollbar-color: rgba(139,92,246,0.6) rgba(255,255,255,0.1);
}

/* ÿ®ÿ±ÿß€å ŸÖÿ±Ÿàÿ±⁄Øÿ±Ÿáÿß€å Webkit (Chrome, Edge, Safari) */
.dropdown-menu::-webkit-scrollbar {
  width: 8px;
}

.dropdown-menu::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.1);
  border-radius: 12px;
}

.dropdown-menu::-webkit-scrollbar-thumb {
  background: rgba(139,92,246,0.6);
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.1);
}

.dropdown-menu::-webkit-scrollbar-thumb:hover {
  background: rgba(139,92,246,0.9);
}

@keyframes fadeInMenu {
  from {opacity: 0; transform: translateY(-5px);}
  to {opacity: 1; transform: translateY(0);}
}

.dropdown-menu.show {
  display: flex;
}

.dropdown-item {
  padding: 10px;
  text-align: center;
  cursor: pointer;
  color: #fff;
  font-size: 15px;
  transition: all 0.2s ease;
}

.dropdown-item:hover {
  background: rgba(139,92,246,0.4);
  backdrop-filter: blur(16px);
}

.chart-wrap {
  flex: 1;
  position: relative;
  border-radius: 15px;
  overflow: hidden;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.15);
}

.buy-btn {
  margin-top: 18px;
  padding: 12px 24px;
  border-radius: 50px;
  border: none;
  cursor: pointer;
  font-size: 17px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(90deg, #8b5cf6, #ec4899);
  box-shadow: 0 0 15px rgba(236,72,153,0.6);
  transition: all 0.25s ease;
  align-self: center;
}

.buy-btn:hover {
  transform: scale(1.07);
  box-shadow: 0 0 25px rgba(236,72,153,0.8);
}

#tooltip {
  position: absolute;
  display: none;
  pointer-events: none;
  z-index: 50;
  background: rgba(255,255,255,0.95);
  color: #000;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 13px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}

@media (max-width: 768px) {
  .chart-box {
    height: 90%;
    padding: 16px;
  }
  .header {
    flex-direction: row;
  }
  .dropdown {
    width: 100%;
  }
  .buy-btn {
    width: 90%;
    font-size: 16px;
  }
}
</style>
</head>
<body>

<div class="chart-box">
  <div class="header">
    <div class="dropdown" id="symbolDropdown">
      <div class="dropdown-toggle" id="symbolToggle">ÿßÿ±ÿ≤: BTC</div>
      <div class="dropdown-menu" id="symbolMenu"></div>
    </div>

    <div class="dropdown" id="tfDropdown">
      <div class="dropdown-toggle" id="tfToggle">ÿ™ÿß€åŸÖ ŸÅÿ±€åŸÖ: 1m</div>
      <div class="dropdown-menu" id="tfMenu"></div>
    </div>
  </div>

  <div class="chart-wrap" id="chart"></div>
  <div id="tooltip"></div>

  <button class="buy-btn" onclick="window.location.href='purchase.html'">üõí ÿÆÿ±€åÿØ ÿßŸÜÿØ€å⁄©ÿßÿ™Ÿàÿ±</button>
</div>

<script>
const signalData = {
  "BTC": {
    "1m": [
      {
        "time": 1764318840,
        "type": "LONG"
      },
      {
        "time": 1764321120,
        "type": "SELL"
      },
      {
        "time": 1764325020,
        "type": "LONG"
      },
      {
        "time": 1764328800,
        "type": "LONG"
      },
      {
        "time": 1764336780,
        "type": "LONG"
      },
      {
        "time": 1764344160,
        "type": "SELL"
      },
      {
        "time": 1764346800,
        "type": "SELL"
      },
      {
        "time": 1764351720,
        "type": "LONG"
      }
    ],
    "3m": [
      {
        "time": 1764177660,
        "type": "LONG"
      },
      {
        "time": 1764202860,
        "type": "LONG"
      },
      {
        "time": 1764249660,
        "type": "LONG"
      },
      {
        "time": 1764269820,
        "type": "SELL"
      },
      {
        "time": 1764297000,
        "type": "LONG"
      },
      {
        "time": 1764309600,
        "type": "SELL"
      },
      {
        "time": 1764316620,
        "type": "LONG"
      },
      {
        "time": 1764328680,
        "type": "LONG"
      },
      {
        "time": 1764344340,
        "type": "SELL"
      },
      {
        "time": 1764351720,
        "type": "LONG"
      }
    ],
    "5m": [
      {
        "time": 1764062700,
        "type": "LONG"
      },
      {
        "time": 1764093600,
        "type": "SELL"
      },
      {
        "time": 1764172500,
        "type": "LONG"
      },
      {
        "time": 1764270000,
        "type": "SELL"
      },
      {
        "time": 1764344100,
        "type": "SELL"
      }
    ],
    "15m": [
      {
        "time": 1763482500,
        "type": "SELL"
      },
      {
        "time": 1763623800,
        "type": "SELL"
      },
      {
        "time": 1763736300,
        "type": "LONG"
      }
    ],
    "30m": [],
    "1h": [
      {
        "time": 1761174000,
        "type": "LONG"
      },
      {
        "time": 1761660000,
        "type": "SELL"
      },
      {
        "time": 1763028000,
        "type": "SELL"
      },
      {
        "time": 1763722800,
        "type": "LONG"
      }
    ],
    "2h": [
      {
        "time": 1758225600,
        "type": "SELL"
      },
      {
        "time": 1759046400,
        "type": "LONG"
      },
      {
        "time": 1759809600,
        "type": "SELL"
      },
      {
        "time": 1761681600,
        "type": "SELL"
      },
      {
        "time": 1762826400,
        "type": "SELL"
      },
      {
        "time": 1763740800,
        "type": "LONG"
      }
    ],
    "4h": [
      {
        "time": 1750680000,
        "type": "LONG"
      },
      {
        "time": 1756785600,
        "type": "LONG"
      },
      {
        "time": 1759867200,
        "type": "SELL"
      },
      {
        "time": 1761667200,
        "type": "SELL"
      }
    ],
    "1d": [
      {
        "time": 1697846400,
        "type": "LONG"
      },
      {
        "time": 1712534400,
        "type": "SELL"
      },
      {
        "time": 1725667200,
        "type": "LONG"
      },
      {
        "time": 1737244800,
        "type": "SELL"
      },
      {
        "time": 1744243200,
        "type": "LONG"
      }
    ]
  },
  "ETH": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [],
    "30m": [
      {
        "time": 1763022600,
        "type": "SELL"
      },
      {
        "time": 1763490600,
        "type": "SELL"
      },
      {
        "time": 1763814600,
        "type": "LONG"
      }
    ],
    "1h": [
      {
        "time": 1761170400,
        "type": "LONG"
      },
      {
        "time": 1761667200,
        "type": "SELL"
      },
      {
        "time": 1763730000,
        "type": "LONG"
      }
    ],
    "2h": [
      {
        "time": 1757462400,
        "type": "LONG"
      },
      {
        "time": 1758232800,
        "type": "SELL"
      },
      {
        "time": 1758852000,
        "type": "LONG"
      },
      {
        "time": 1759838400,
        "type": "SELL"
      },
      {
        "time": 1760695200,
        "type": "LONG"
      },
      {
        "time": 1761595200,
        "type": "SELL"
      },
      {
        "time": 1763013600,
        "type": "SELL"
      },
      {
        "time": 1763755200,
        "type": "LONG"
      }
    ],
    "4h": [
      {
        "time": 1751976000,
        "type": "LONG"
      },
      {
        "time": 1753660800,
        "type": "SELL"
      },
      {
        "time": 1754193600,
        "type": "LONG"
      },
      {
        "time": 1757793600,
        "type": "SELL"
      },
      {
        "time": 1759795200,
        "type": "SELL"
      },
      {
        "time": 1761652800,
        "type": "SELL"
      },
      {
        "time": 1763726400,
        "type": "LONG"
      }
    ],
    "1d": [
      {
        "time": 1697587200,
        "type": "LONG"
      },
      {
        "time": 1706659200,
        "type": "LONG"
      },
      {
        "time": 1717459200,
        "type": "SELL"
      },
      {
        "time": 1725667200,
        "type": "LONG"
      },
      {
        "time": 1734220800,
        "type": "SELL"
      },
      {
        "time": 1745280000,
        "type": "LONG"
      },
      {
        "time": 1751155200,
        "type": "LONG"
      },
      {
        "time": 1759622400,
        "type": "SELL"
      }
    ]
  },
  "SOL": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [],
    "30m": [],
    "1h": [],
    "2h": [],
    "4h": [],
    "1d": []
  },
  "BNB": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [],
    "30m": [],
    "1h": [],
    "2h": [],
    "4h": [],
    "1d": []
  },
  "DOGE": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [],
    "30m": [],
    "1h": [],
    "2h": [],
    "4h": [],
    "1d": []
  },
 "TRON": {
    "1m": [],
    "3m": [
      {
        "time": 1764231480,
        "type": "LONG"
      },
      {
        "time": 1764283680,
        "type": "LONG"
      }
    ],
    "5m": [
      {
        "time": 1764103500,
        "type": "LONG"
      },
      {
        "time": 1764177900,
        "type": "LONG"
      }
    ],
    "15m": [
      {
        "time": 1763506800,
        "type": "SELL"
      },
      {
        "time": 1763620200,
        "type": "SELL"
      },
      {
        "time": 1763699400,
        "type": "SELL"
      },
      {
        "time": 1763992800,
        "type": "SELL"
      },
      {
        "time": 1764084600,
        "type": "LONG"
      }
    ],
    "30m": [
      {
        "time": 1763283600,
        "type": "SELL"
      },
      {
        "time": 1764079200,
        "type": "LONG"
      }
    ],
    "1h": [
      {
        "time": 1761166800,
        "type": "SELL"
      },
      {
        "time": 1762282800,
        "type": "LONG"
      }
    ],
    "2h": [
      {
        "time": 1757793600,
        "type": "SELL"
      },
      {
        "time": 1759852800,
        "type": "SELL"
      }
    ],
    "4h": [
      {
        "time": 1750824000,
        "type": "LONG"
      },
      {
        "time": 1755921600,
        "type": "SELL"
      },
      {
        "time": 1759838400,
        "type": "SELL"
      }
    ],
    "1d": [
      {
        "time": 1691798400,
        "type": "LONG"
      },
      {
        "time": 1715644800,
        "type": "LONG"
      },
      {
        "time": 1730678400,
        "type": "LONG"
      }
    ]
  },
  "ADA": {
    "1m": [],
    "3m": [],
    "5m": [
      {
        "time": 1764162000,
        "type": "LONG"
      }
    ],
    "15m": [
      {
        "time": 1763649000,
        "type": "SELL"
      },
      {
        "time": 1763820000,
        "type": "LONG"
      }
    ],
    "30m": [
      {
        "time": 1763816400,
        "type": "LONG"
      }
    ],
    "1h": [
      {
        "time": 1761555600,
        "type": "SELL"
      },
      {
        "time": 1762750800,
        "type": "SELL"
      }
    ],
    "2h": [
      {
        "time": 1758312000,
        "type": "SELL"
      },
      {
        "time": 1761595200,
        "type": "SELL"
      }
    ],
    "4h": [
      {
        "time": 1750824000,
        "type": "LONG"
      },
      {
        "time": 1759723200,
        "type": "SELL"
      }
    ],
    "1d": [
      {
        "time": 1697500800,
        "type": "LONG"
      },
      {
        "time": 1728777600,
        "type": "LONG"
      },
      {
        "time": 1758672000,
        "type": "SELL"
      }
    ]
  },
  "LINK": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [],
    "30m": [],
    "1h": [],
    "2h": [],
    "4h": [],
    "1d": []
  },
  "SUI": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [
      {
        "time": 1763960400,
        "type": "LONG"
      }
    ],
    "30m": [
      {
        "time": 1762779600,
        "type": "SELL"
      }
    ],
    "1h": [
      {
        "time": 1761606000,
        "type": "SELL"
      }
    ],
    "2h": [],
    "4h": [
      {
        "time": 1750737600,
        "type": "LONG"
      },
      {
        "time": 1755172800,
        "type": "SELL"
      }
    ],
    "1d": [
      {
        "time": 1699056000,
        "type": "LONG"
      },
      {
        "time": 1723939200,
        "type": "LONG"
      },
      {
        "time": 1736208000,
        "type": "SELL"
      }
    ]
  },
  "GOLD": {
    "1m": [],
    "3m": [],
    "5m": [],
    "15m": [],
    "30m": [],
    "1h": [],
    "2h": [],
    "4h": [],
    "1d": []
  }
}
const symbolMap = {
  "BTC":"BTCUSDT","ETH":"ETHUSDT","SOL":"SOLUSDT","BNB":"BNBUSDT",
  "DOGE":"DOGEUSDT","TRON":"TRXUSDT"
};

const timeframes = ['1m','3m','5m','15m','30m','1h','2h','3h','4h','1d'];
let activeSymbol = 'BTC', activeTF = '1m';

const symbolMenu=document.getElementById('symbolMenu');
const tfMenu=document.getElementById('tfMenu');
const symbolToggle=document.getElementById('symbolToggle');
const tfToggle=document.getElementById('tfToggle');

Object.keys(symbolMap).forEach(s=>{
  const div=document.createElement('div');
  div.className='dropdown-item';
  div.textContent=s;
  div.onclick=()=>{activeSymbol=s; symbolToggle.textContent='ÿßÿ±ÿ≤: '+s; refreshData(); closeMenus();};
  symbolMenu.appendChild(div);
});

timeframes.forEach(tf=>{
  const div=document.createElement('div');
  div.className='dropdown-item';
  div.textContent=tf;
  div.onclick=()=>{activeTF=tf; tfToggle.textContent='ÿ™ÿß€åŸÖ ŸÅÿ±€åŸÖ: '+tf; refreshData(); closeMenus();};
  tfMenu.appendChild(div);
});

function toggleMenu(menu){
  closeMenus();
  menu.classList.toggle('show');
}
function closeMenus(){
  document.querySelectorAll('.dropdown-menu').forEach(m=>m.classList.remove('show'));
}
document.addEventListener('click',e=>{
  if(!e.target.closest('.dropdown')) closeMenus();
});
symbolToggle.onclick=(e)=>{e.stopPropagation(); toggleMenu(symbolMenu);};
tfToggle.onclick=(e)=>{e.stopPropagation(); toggleMenu(tfMenu);} ;

const chartContainer=document.getElementById('chart');
const tooltip=document.getElementById('tooltip');

const chart = LightweightCharts.createChart(chartContainer, {
  layout: {background:{color:'rgba(255,255,255,0.05)'}, textColor:'#fff'},
  grid: { vertLines:{color:'#fff1'}, horzLines:{color:'#fff1'} },
  crosshair: { 
    mode: LightweightCharts.CrosshairMode.Normal,
    vertLine: {
      color: 'rgba(255,255,255,0.85)',  // ÿ≥ŸÅ€åÿØ ÿ®ÿ±ÿßŸÇ
      width: 1.3,
      style: 0,
      visible: true,
      labelBackgroundColor: 'rgba(255,255,255,0.2)'
    },
    horzLine: {
      color: 'rgba(255,255,255,0.85)',
      width: 1.3,
      style: 0,
      visible: true,
      labelBackgroundColor: 'rgba(255,255,255,0.2)'
    }
  },
  rightPriceScale: { borderColor:'#fff2' },
  timeScale: { borderColor:'#fff2', timeVisible:true }
});

const candleSeries = chart.addCandlestickSeries({
  upColor:'#22c55e', borderUpColor:'#22c55e', wickUpColor:'#22c55e',
  downColor:'#ef4444', borderDownColor:'#ef4444', wickDownColor:'#ef4444'
});

function fmtTimeUnix(ts){
  if(!ts) return '‚Äî';
  return new Date(ts*1000).toLocaleString('fa-IR',{hour:'2-digit',minute:'2-digit',month:'2-digit',day:'2-digit'});
}

async function loadHistorical(symbolBinance, interval){
  const url=`https://api.binance.com/api/v3/klines?symbol=${symbolBinance}&interval=${interval}&limit=1500`;
  const res=await fetch(url);
  const raw=await res.json();
  const candles=raw.map(k=>({time:Math.floor(k[0]/1000),open:+k[1],high:+k[2],low:+k[3],close:+k[4]}));
  candleSeries.setData(candles);

  // üåü ÿØÿß€åÿ±Ÿá‚ÄåŸáÿß€å ÿ±ŸÜ⁄Ø€å ÿ®ÿ±ÿß€å ÿ≥€å⁄ØŸÜÿßŸÑ‚ÄåŸáÿß
  const signals = (signalData[activeSymbol] && signalData[activeSymbol][activeTF]) || [];
  const markers = signals.map(sig => ({
    time: sig.time,
    position: sig.type === 'LONG' ? 'belowBar' : 'aboveBar',
    color: sig.type === 'LONG' ? '#22c55e' : '#ef4444', // ÿ≥ÿ®ÿ≤ Ÿà ŸÇÿ±ŸÖÿ≤
    shape: 'circle',
    text: sig.type === 'LONG' ? 'LONG' : 'SELL'
  }));
  candleSeries.setMarkers(markers);
}

async function refreshData(){
  await loadHistorical(symbolMap[activeSymbol], activeTF);
}

chart.subscribeCrosshairMove(param=>{
  if(!param || !param.time || !param.point){ tooltip.style.display='none'; return; }
  const t = typeof param.time==='number'?param.time:param.time.timestamp||param.time;
  tooltip.innerHTML=`‚è∞ ${fmtTimeUnix(t)}`;
  let x=param.point.x+16, y=param.point.y+16;
  if(x>chartContainer.clientWidth-150) x=param.point.x-150;
  tooltip.style.left=x+'px'; tooltip.style.top=y+'px';
  tooltip.style.display='block';
});
chartContainer.addEventListener('mouseleave',()=>tooltip.style.display='none');

(async function init(){ await refreshData(); })();
</script>


</body>
</html>


